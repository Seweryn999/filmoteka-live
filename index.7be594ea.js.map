{"mappings":"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","sources":["src/scripts/pagination.mjs"],"sourcesContent":["import { getTrendingFilms } from './get-trending';\nimport { getFilmsByQueryString } from './get-films-by-query.mjs';\nimport { makeSingleFilmTile } from './make_single_tile';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const filmsContainer = document.getElementById('films-container');\n  const pagination = document.getElementById('pagination');\n  const searchForm = document.querySelector('form.search-form');\n  const input = document.getElementById('search-input');\n\n  if (!filmsContainer || !pagination || !searchForm || !input) {\n    console.error('Cannot find essential elements');\n    return;\n  }\n\n  const pageSize = 20;\n  let currentPage = 1;\n\n  async function displayFilms(page) {\n    if (input.value === '') {\n      try {\n        const response = await getTrendingFilms(page);\n        const films = response.results;\n        filmsContainer.innerHTML = '';\n\n        for (const film of films) {\n          const filmTileHTML = await makeSingleFilmTile(film);\n          filmsContainer.insertAdjacentHTML('beforeend', filmTileHTML);\n        }\n\n        const totalPages = response.total_pages;\n        createPagination(totalPages);\n      } catch (error) {\n        console.error('Wystąpił błąd podczas pobierania danych:', error);\n      }\n    } else {\n      try {\n        const response = await getFilmsByQueryString(input.value, page);\n        const films = response.results;\n        filmsContainer.innerHTML = '';\n\n        for (const film of films) {\n          const filmTileHTML = await makeSingleFilmTile(film);\n          filmsContainer.insertAdjacentHTML('beforeend', filmTileHTML);\n        }\n\n        const totalPages = response.total_pages;\n        createPagination(totalPages);\n      } catch (error) {\n        console.error('Wystąpił błąd podczas pobierania danych:', error);\n      }\n    }\n  }\n\n  function createPagination(totalPages) {\n    pagination.innerHTML = '';\n\n    const pageRange = 2;\n\n    let startPage = currentPage - pageRange;\n    let endPage = currentPage + pageRange;\n\n    startPage = Math.max(startPage, 1);\n    endPage = Math.min(endPage, totalPages);\n\n    const previousPageItem = document.createElement('li');\n    previousPageItem.classList.add('page-item');\n    if (currentPage === 1) {\n      previousPageItem.classList.add('disabled');\n    }\n    const previousPageLink = document.createElement('a');\n    previousPageLink.classList.add('page-link');\n    previousPageLink.href = '#';\n    previousPageLink.textContent = '<';\n    previousPageLink.addEventListener('click', (event) => {\n      event.preventDefault();\n      if (currentPage > 1) {\n        currentPage--;\n        displayFilms(currentPage);\n      }\n    });\n    previousPageItem.appendChild(previousPageLink);\n    pagination.appendChild(previousPageItem);\n\n    for (let i = startPage; i <= endPage; i++) {\n      const pageItem = document.createElement('li');\n      pageItem.classList.add('page-item');\n      if (i === currentPage) {\n        pageItem.classList.add('active');\n      }\n\n      const pageLink = document.createElement('a');\n      pageLink.classList.add('page-link');\n      pageLink.href = '#';\n      pageLink.textContent = i;\n      pageLink.addEventListener('click', (event) => {\n        event.preventDefault();\n        currentPage = i;\n        displayFilms(currentPage);\n      });\n\n      pageItem.appendChild(pageLink);\n      pagination.appendChild(pageItem);\n    }\n\n    const nextPageItem = document.createElement('li');\n    nextPageItem.classList.add('page-item');\n    if (currentPage === totalPages) {\n      nextPageItem.classList.add('disabled');\n    }\n    const nextPageLink = document.createElement('a');\n    nextPageLink.classList.add('page-link');\n    nextPageLink.href = '#';\n    nextPageLink.textContent = '>';\n    nextPageLink.addEventListener('click', (event) => {\n      event.preventDefault();\n      if (currentPage < totalPages) {\n        currentPage++;\n        displayFilms(currentPage);\n      }\n    });\n    nextPageItem.appendChild(nextPageLink);\n    pagination.appendChild(nextPageItem);\n  }\n\n  searchForm.addEventListener('submit', (ev) => {\n    ev.preventDefault();\n    currentPage = 1;\n    displayFilms(currentPage);\n  });\n\n  displayFilms(currentPage);\n});\n"],"names":["$bpxeT","parcelRequire","document","addEventListener","filmsContainer","getElementById","pagination","searchForm","querySelector","input","currentPage","ev","preventDefault","displayFilms","console","error","page","_displayFilms","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","films","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","film","filmTileHTML","response1","films1","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_iterator1","_step1","film1","filmTileHTML1","value","$9fbQx","getTrendingFilms","_ctx","sent","results","innerHTML","undefined","Symbol","iterator","next","done","$xTqOg","makeSingleFilmTile","insertAdjacentHTML","t0","return","createPagination","total_pages","t1","$lsoVg","getFilmsByQueryString","t2","t3","totalPages","pageItem","createElement","classList","add","i","pageLink","href","textContent","event","appendChild","startPage","endPage","Math","max","min","previousPageItem","previousPageLink","i1","_loop","nextPageItem","nextPageLink"],"version":3,"file":"index.7be594ea.js.map"}