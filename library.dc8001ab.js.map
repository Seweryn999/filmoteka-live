{"mappings":"6iBAOA,IAAMA,EAAaC,SAASC,cAAc,oBACpCC,EAAWF,SAASC,cAAc,kBAuGxCF,EAAWI,iBAAiB,SAnGD,WACvB,IAG4BC,EAAMC,EAAQC,EAClCC,EACAC,EALFC,EAAYT,SAASC,cAAc,qBAAqBS,QAAQC,MAChEC,EAASV,EAASQ,QAAQG,GAEJT,EAqBTQ,EArBeP,EAqBP,eArBeC,EAqBC,aApBnCC,EAAWO,KAAKC,MAAMC,aAAaC,QAAQZ,KAAY,GACvDG,EAAcM,KAAKC,MAAMC,aAAaC,QAAQX,KAAe,GAE7DC,EAASW,SAASd,GAClBe,EAAAC,OAAOC,QAAQ,GAAkCC,OAA/Bb,EAAU,uBAA+Da,OAA1CjB,EAAOkB,QAAQ,QAAS,IAAIC,cAAc,YAI3FhB,EAAYU,SAASd,IACrBI,EAAcA,EAAYiB,QAAO,SAAAZ,G,OAAMA,IAAOT,C,IAC9CY,aAAaU,QAAQpB,EAAWQ,KAAKa,UAAUnB,IAC/CW,EAAAC,OAAOQ,QAAQ,GAAoCN,OAAjCb,EAAU,yBAAwFa,OAAjEhB,EAAUiB,QAAQ,QAAS,IAAIC,cAAc,sBAA8DF,OAA1CjB,EAAOkB,QAAQ,QAAS,IAAIC,cAAc,YAE9JL,EAAAC,OAAOQ,QAAQ,GAAgCN,OAA7Bb,EAAU,qBAA6Da,OAA1CjB,EAAOkB,QAAQ,QAAS,IAAIC,cAAc,WAG7FjB,EAASsB,KAAKzB,GACdY,aAAaU,QAAQrB,EAAQS,KAAKa,UAAUpB,I,IA8EpDL,EAASC,iBAAiB,SAlDG,WACrB,IAG4BC,EAAMC,EAAQC,EAClCC,EACAC,EALFC,EAAYT,SAASC,cAAc,qBAAqBS,QAAQC,MAChEC,EAASV,EAASQ,QAAQG,GAEJT,EAsBTQ,EAtBeP,EAsBP,aAtBeC,EAsBD,eArBjCC,EAAWO,KAAKC,MAAMC,aAAaC,QAAQZ,KAAY,GACvDG,EAAcM,KAAKC,MAAMC,aAAaC,QAAQX,KAAe,GAE7DC,EAASW,SAASd,GAClBe,EAAAC,OAAOC,QAAQ,GAAkCC,OAA/Bb,EAAU,uBAA+Da,OAA1CjB,EAAOkB,QAAQ,QAAS,IAAIC,cAAc,YAI3FhB,EAAYU,SAASd,IACrBI,EAAcA,EAAYiB,QAAO,SAAAZ,G,OAAMA,IAAOT,C,IAC9CY,aAAaU,QAAQpB,EAAWQ,KAAKa,UAAUnB,IAC/CW,EAAAC,OAAOQ,QAAQ,GAAoCN,OAAjCb,EAAU,yBAAwFa,OAAjEhB,EAAUiB,QAAQ,QAAS,IAAIC,cAAc,sBAA8DF,OAA1CjB,EAAOkB,QAAQ,QAAS,IAAIC,cAAc,YAE9JL,EAAAC,OAAOQ,QAAQ,GAAgCN,OAA7Bb,EAAU,qBAA6Da,OAA1CjB,EAAOkB,QAAQ,QAAS,IAAIC,cAAc,WAG7FjB,EAASsB,KAAKzB,GACdY,aAAaU,QAAQrB,EAAQS,KAAKa,UAAUpB,I","sources":["src/scripts/library-watched-queue.mjs"],"sourcesContent":["import axios from \"axios\";\nimport { Notify } from \"notiflix\";\nimport { apiKey } from \"./make_single_tile.mjs\";\nimport { getFilmDetails } from \"./modal-library.mjs\";\nimport { makeSingleFilmTile } from \"./make_single_tile.mjs\";\nimport { renderQueue, renderWatched } from \"./library.mjs\";\n\nconst addWatched = document.querySelector(\".add-watched-btn\");\nconst addQueue = document.querySelector(\".add-queue-btn\");\n\n\n\nconst handleAddToWatched = () => {\n    const filmTitle = document.querySelector(\".modal-film-title\").dataset.title;\n    const filmId = addQueue.dataset.id;\n\n    const updateLocalStorage = (film, addKey, removeKey) => {\n        let addFilms = JSON.parse(localStorage.getItem(addKey)) || [];\n        let removeFilms = JSON.parse(localStorage.getItem(removeKey)) || [];\n    \n        if (addFilms.includes(film)) {\n            Notify.failure(`${filmTitle} is already in the ${addKey.replace('Films', '').toLowerCase()} list!`);\n            return false;\n        }\n    \n        if (removeFilms.includes(film)) {\n            removeFilms = removeFilms.filter(id => id !== film);\n            localStorage.setItem(removeKey, JSON.stringify(removeFilms));\n            Notify.success(`${filmTitle} is removed from the ${removeKey.replace('Films', '').toLowerCase()} and added to the ${addKey.replace('Films', '').toLowerCase()} list!`);\n        } else {\n            Notify.success(`${filmTitle} is added to the ${addKey.replace('Films', '').toLowerCase()} list!`);\n        }\n    \n        addFilms.push(film);\n        localStorage.setItem(addKey, JSON.stringify(addFilms));\n        return true;\n    };\n    updateLocalStorage(filmId, 'watchedFilms', 'queueFilms');\n\n\n    };\n\n    // const addToLocalStorage = (film, key) => {\n    //     let films = JSON.parse(localStorage.getItem(key)) || [];\n    //     let queueFilms = JSON.parse(localStorage.getItem('queueFilms')) || [];\n\n    //     if (films.includes(film)) {\n    //         Notify.failure(`${filmTitle} is already watched!`);\n    //         return false;\n    //     } \n    //     if (queueFilms.includes(film)) {\n    //         Notify.failure(`${filmTitle} is already in on the queue!`);\n    //         return false;\n    //     }\n    //     else {\n    //     Notify.success(`${filmTitle} is added to watched list!`);\n    //     films.push(film);\n    //     localStorage.setItem(key, JSON.stringify(films));\n    //     }\n    // };\n    // addToLocalStorage(filmId, 'watchedFilms')\n\n    const handleAddToQueue = () => {\n        const filmTitle = document.querySelector(\".modal-film-title\").dataset.title;\n        const filmId = addQueue.dataset.id;\n\n        const updateLocalStorage = (film, addKey, removeKey) => {\n            let addFilms = JSON.parse(localStorage.getItem(addKey)) || [];\n            let removeFilms = JSON.parse(localStorage.getItem(removeKey)) || [];\n        \n            if (addFilms.includes(film)) {\n                Notify.failure(`${filmTitle} is already in the ${addKey.replace('Films', '').toLowerCase()} list!`);\n                return false;\n            }\n        \n            if (removeFilms.includes(film)) {\n                removeFilms = removeFilms.filter(id => id !== film);\n                localStorage.setItem(removeKey, JSON.stringify(removeFilms));\n                Notify.success(`${filmTitle} is removed from the ${removeKey.replace('Films', '').toLowerCase()} and added to the ${addKey.replace('Films', '').toLowerCase()} list!`);\n            } else {\n                Notify.success(`${filmTitle} is added to the ${addKey.replace('Films', '').toLowerCase()} list!`);\n            }\n        \n            addFilms.push(film);\n            localStorage.setItem(addKey, JSON.stringify(addFilms));\n            return true;\n        };\n\n        updateLocalStorage(filmId, 'queueFilms', 'watchedFilms');\n\n\n        // const addToLocalStorage = (film, key) => {\n        //     let films = JSON.parse(localStorage.getItem(key)) || [];\n        //     let watchedFilms = JSON.parse(localStorage.getItem('watchedFilms')) || [];\n            \n        //     if (watchedFilms.includes(film)) {\n        //         Notify.failure(`${filmTitle} is already watched!`);\n        //         return false;\n        //     }\n        //     if (films.includes(film)) {\n        //         Notify.failure(`${filmTitle} is already in on the queue!`);\n        //         return false;\n        //     } else {\n        //     Notify.success(`${filmTitle} is added to queue list!`);\n        //     films.push(film);\n        //     localStorage.setItem(key, JSON.stringify(films));\n        //     }\n        // };\n        // addToLocalStorage(filmId, 'queueFilms');\n    };\n\naddWatched.addEventListener(\"click\", handleAddToWatched);\naddQueue.addEventListener(\"click\", handleAddToQueue);\n"],"names":["$6ebfeddce3b749c8$var$addWatched","document","querySelector","$6ebfeddce3b749c8$var$addQueue","addEventListener","film","addKey","removeKey","addFilms","removeFilms","filmTitle","dataset","title","filmId","id","JSON","parse","localStorage","getItem","includes","$ejkSG","Notify","failure","concat","replace","toLowerCase","filter","setItem","stringify","success","push"],"version":3,"file":"library.dc8001ab.js.map"}